<?= $this->partial('common/header.phtml', $this) ?>
<h1><?= $this->escape($this->event->name) ?></h1>
<table class="table">
    <thead>
        <tr>
            <th>代稱</th>
            <th>標題</th>
            <th>共筆</th>
            <th>坑主</th>
            <th>成員</th>
        </tr>
    </thead>
    <tbody>
    <?php foreach (Channel::search(array('event_id' => $this->event->id))->order('order ASC') as $channel) { ?>
    <?php if (!$channel->canSee($this->user)) { continue; } ?>
    <tr>
        <td><a href="/meet/channel/<?= urlencode($this->event->id) ?>/<?= $channel->channel_id ?>"><?= $this->escape($channel->name) ?></a></td>
        <td><?= $this->escape($channel->getStatus()->getMeta()->title) ?></td>
        <td>
            <?php if ($hackmd = $channel->getStatus()->getMeta()->hackmd) { ?>
            <a target="_blank" href="<?= $this->escape($hackmd) ?>">共筆</a>
            <?php } ?>
        </td>
        <td><?= $this->escape(User::toUsersString($channel->getData()->owners)) ?></td>
        <td></td>
    </tr>
    <?php } ?>
    </tbody>
</table>
<hr>
<?= $this->partial('common/footer.phtml', $this) ?>
